{"ast":null,"code":"var _jsxFileName = \"C:\\\\Nodejs\\\\ecomm\\\\src\\\\pages\\\\shop\\\\Shop.js\";\nimport React from 'react';\nimport CollectionOverview from '../../components/collection-overview/CollectionOverview';\nimport { Route } from 'react-router-dom';\nimport Collection from '../collection/Collection'; // import {firestore , convertCollectionsSnapshotToMap} from '../../firebase/Firebase'\n\nimport { connect } from 'react-redux'; // import { updateCollections } from '../../redux/shop/ShopActions'\n\nimport { createStructuredSelector } from 'reselect'; // import { fetchCollectionsStartAsync } from '../../redux/shop/ShopActions';\n\nimport { fetchCollectionsStart } from '../../redux/shop/ShopActions';\nimport WithSpinner from '../../components/withSpinner/WithSpinner';\nimport { selectIsCollectionFetching, selectIsCollectionsLoaded } from '../../redux/shop/ShopSelector';\nconst CollectionOverviewWithSpinner = WithSpinner(CollectionOverview);\nconst CollectionWithSpinner = WithSpinner(Collection);\n\nclass Shop extends React.Component {\n  // state = {\n  //     loading : true\n  // }\n  // unsubscribeFromSnapshot=null;\n  // componentDidMount(){\n  //     const { updateCollections } = this.props\n  //     const collectionRef= firestore.collection('collections');\n  //     // this.unsubscribeFromSnapshot = collectionRef.onSnapshot(async snapshot => {\n  //     //     // console.log(snapshot)\n  //     //     const collectionsMap =  convertCollectionsSnapshotToMap(snapshot)\n  //     //     console.log(collectionsMap)\n  //     //     updateCollections(collectionsMap)\n  //     //     this.setState({ loading : false })\n  //     // }) ** This is object returning method\n  //     collectionRef.get().then(\n  //         snapshot => {\n  //                 // console.log(snapshot)\n  //                 const collectionsMap =  convertCollectionsSnapshotToMap(snapshot)\n  //                 console.log(collectionsMap)\n  //                 updateCollections(collectionsMap)\n  //                 this.setState({ loading : false })\n  //             }\n  //     ) //**this is a promise based request\n  //     // fetch('https://firestore.googleapis.com/v1/projects/crown-db-f5972/databases/(default)/documents/collections')\n  //     // .then(response => response.json())\n  //     // .then(collections => console.log(collections))\n  //     // collectionRef.get().then(\n  //     //     snapshot => {\n  //     //             // console.log(snapshot)\n  //     //             const collectionsMap =  convertCollectionsSnapshotToMap(snapshot)\n  //     //             console.log(collectionsMap)\n  //     //             updateCollections(collectionsMap)\n  //     //             this.setState({ loading : false })\n  //     //         }\n  //     // )\n  // }\n  componentDidMount() {\n    const {\n      fetchCollectionsStartAsync\n    } = this.props; // fetchCollectionsStartAsync();\n\n    fetchCollectionsStart(); //fetchCollectionsStart is the name of our saga\n  }\n\n  render() {\n    const {\n      match,\n      isCollectionFetching,\n      isColletionsLoaded\n    } = this.props; // const { loading } = this.state\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"shop-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: `${match.path}`,\n      render: props => /*#__PURE__*/React.createElement(CollectionOverviewWithSpinner, Object.assign({\n        isLoading: isCollectionFetching\n      }, props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 42\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: `${match.path}/:collectionId`,\n      render: props => /*#__PURE__*/React.createElement(CollectionWithSpinner, Object.assign({\n        isLoading: !isColletionsLoaded\n      }, props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 42\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nconst mapStateToProps = createStructuredSelector({\n  isCollectionFetching: selectIsCollectionFetching,\n  isColletionsLoaded: selectIsCollectionsLoaded\n});\n\nconst mapDispatchToProps = dispatch => ({\n  fetchCollectionsStartAsync: () => dispatch(fetchCollectionsStartAsync()) // fetchCollectionsStart: () => dispatch(fetchCollectionsStart())\n\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Shop);","map":{"version":3,"sources":["C:/Nodejs/ecomm/src/pages/shop/Shop.js"],"names":["React","CollectionOverview","Route","Collection","connect","createStructuredSelector","fetchCollectionsStart","WithSpinner","selectIsCollectionFetching","selectIsCollectionsLoaded","CollectionOverviewWithSpinner","CollectionWithSpinner","Shop","Component","componentDidMount","fetchCollectionsStartAsync","props","render","match","isCollectionFetching","isColletionsLoaded","path","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,kBAAP,MAA+B,yDAA/B;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,OAAOC,UAAP,MAAuB,0BAAvB,C,CACA;;AACA,SAASC,OAAT,QAAwB,aAAxB,C,CACA;;AACA,SAASC,wBAAT,QAAyC,UAAzC,C,CACA;;AACA,SAASC,qBAAT,QAAsC,8BAAtC;AACA,OAAOC,WAAP,MAAwB,0CAAxB;AACA,SAASC,0BAAT,EAAsCC,yBAAtC,QAAuE,+BAAvE;AAGA,MAAMC,6BAA6B,GAAGH,WAAW,CAACN,kBAAD,CAAjD;AACA,MAAMU,qBAAqB,GAAGJ,WAAW,CAACJ,UAAD,CAAzC;;AAGA,MAAMS,IAAN,SAAmBZ,KAAK,CAACa,SAAzB,CAAoC;AAChC;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAC,EAAAA,iBAAiB,GAAG;AAChB,UAAM;AAAEC,MAAAA;AAAF,QAAiC,KAAKC,KAA5C,CADgB,CAGhB;;AACAV,IAAAA,qBAAqB,GAJL,CAKhB;AACD;;AAEHW,EAAAA,MAAM,GAAE;AACJ,UAAM;AAACC,MAAAA,KAAD;AAASC,MAAAA,oBAAT;AAAgCC,MAAAA;AAAhC,QAAsD,KAAKJ,KAAjE,CADI,CAEJ;;AACJ,wBACQ;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAE,KAAF;AAAQ,MAAA,KAAK,MAAb;AAAc,MAAA,IAAI,EAAG,GAAEE,KAAK,CAACG,IAAK,EAAlC;AACA,MAAA,MAAM,EAAOL,KAAF,iBAAc,oBAAC,6BAAD;AAA+B,QAAA,SAAS,EAAGG;AAA3C,SAAsEH,KAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAGI,oBAAE,KAAF;AAAQ,MAAA,KAAK,MAAb;AAAc,MAAA,IAAI,EAAG,GAAEE,KAAK,CAACG,IAAK,gBAAlC;AACA,MAAA,MAAM,EAAOL,KAAF,iBAAc,oBAAC,qBAAD;AAAuB,QAAA,SAAS,EAAG,CAACI;AAApC,SAA6DJ,KAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHJ,CADR;AASC;;AA/D+B;;AAkEpC,MAAMM,eAAe,GAAGjB,wBAAwB,CAAE;AAC9Cc,EAAAA,oBAAoB,EAAGX,0BADuB;AAE9CY,EAAAA,kBAAkB,EAAGX;AAFyB,CAAF,CAAhD;;AAKA,MAAMc,kBAAkB,GAAGC,QAAQ,KAAK;AACpCT,EAAAA,0BAA0B,EAAE,MAAMS,QAAQ,CAACT,0BAA0B,EAA3B,CADN,CAEpC;;AAFoC,CAAL,CAAnC;;AAKA,eAAeX,OAAO,CAACkB,eAAD,EAAkBC,kBAAlB,CAAP,CAA6CX,IAA7C,CAAf","sourcesContent":["import React from 'react'\nimport CollectionOverview from '../../components/collection-overview/CollectionOverview'\nimport { Route } from 'react-router-dom'\nimport Collection from '../collection/Collection'\n// import {firestore , convertCollectionsSnapshotToMap} from '../../firebase/Firebase'\nimport { connect } from 'react-redux'\n// import { updateCollections } from '../../redux/shop/ShopActions'\nimport { createStructuredSelector } from 'reselect'\n// import { fetchCollectionsStartAsync } from '../../redux/shop/ShopActions';\nimport { fetchCollectionsStart } from '../../redux/shop/ShopActions';\nimport WithSpinner from '../../components/withSpinner/WithSpinner'\nimport { selectIsCollectionFetching , selectIsCollectionsLoaded } from '../../redux/shop/ShopSelector'\n\n\nconst CollectionOverviewWithSpinner = WithSpinner(CollectionOverview)\nconst CollectionWithSpinner = WithSpinner(Collection)\n\n\nclass Shop extends React.Component  {\n    // state = {\n    //     loading : true\n    // }\n    // unsubscribeFromSnapshot=null;\n\n    // componentDidMount(){\n    //     const { updateCollections } = this.props\n    //     const collectionRef= firestore.collection('collections');\n\n    //     // this.unsubscribeFromSnapshot = collectionRef.onSnapshot(async snapshot => {\n    //     //     // console.log(snapshot)\n    //     //     const collectionsMap =  convertCollectionsSnapshotToMap(snapshot)\n    //     //     console.log(collectionsMap)\n    //     //     updateCollections(collectionsMap)\n    //     //     this.setState({ loading : false })\n    //     // }) ** This is object returning method\n\n    //     collectionRef.get().then(\n    //         snapshot => {\n    //                 // console.log(snapshot)\n    //                 const collectionsMap =  convertCollectionsSnapshotToMap(snapshot)\n    //                 console.log(collectionsMap)\n    //                 updateCollections(collectionsMap)\n    //                 this.setState({ loading : false })\n    //             }\n    //     ) //**this is a promise based request\n\n    //     // fetch('https://firestore.googleapis.com/v1/projects/crown-db-f5972/databases/(default)/documents/collections')\n    //     // .then(response => response.json())\n    //     // .then(collections => console.log(collections))\n\n    //     // collectionRef.get().then(\n    //     //     snapshot => {\n    //     //             // console.log(snapshot)\n    //     //             const collectionsMap =  convertCollectionsSnapshotToMap(snapshot)\n    //     //             console.log(collectionsMap)\n    //     //             updateCollections(collectionsMap)\n    //     //             this.setState({ loading : false })\n    //     //         }\n    //     // )\n    // }\n\n    componentDidMount() {\n        const { fetchCollectionsStartAsync } = this.props;\n    \n        // fetchCollectionsStartAsync();\n        fetchCollectionsStart();\n        //fetchCollectionsStart is the name of our saga\n      }\n\n    render(){\n        const {match , isCollectionFetching , isColletionsLoaded} = this.props;\n        // const { loading } = this.state\n    return(\n            <div className='shop-page'>\n                < Route exact path={`${match.path}`} \n                render = { ( props ) =>  <CollectionOverviewWithSpinner isLoading={ isCollectionFetching } {...props} /> } /> \n                < Route exact path={`${match.path}/:collectionId`} \n                render = { ( props ) =>  <CollectionWithSpinner isLoading={ !isColletionsLoaded } {...props} /> }  />\n            </div>\n        )\n        \n    }\n}\n\nconst mapStateToProps = createStructuredSelector ({\n    isCollectionFetching : selectIsCollectionFetching,\n    isColletionsLoaded : selectIsCollectionsLoaded\n})\n\nconst mapDispatchToProps = dispatch => ({\n    fetchCollectionsStartAsync: () => dispatch(fetchCollectionsStartAsync())\n    // fetchCollectionsStart: () => dispatch(fetchCollectionsStart())\n  });\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Shop)"]},"metadata":{},"sourceType":"module"}