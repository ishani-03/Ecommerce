{"ast":null,"code":"var _jsxFileName = \"C:\\\\Nodejs\\\\ecomm\\\\client\\\\src\\\\App.js\";\nimport React, { useEffect, lazy, Suspense } from 'react';\nimport './App.scss'; // import Homepage from './pages/Homepage/Homepage'\n// import Shop from './pages/shop/Shop'\n\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport Header from './components/Header/Header'; // import SignUpSignIn from './pages/SignUp-SignIn/SignUpSignIn'\n//  import {auth , createUserProfileDocument , **addCollectionAndDocuments} from './firebase/Firebase'\n// import {auth , createUserProfileDocument} from './firebase/Firebase'\n\nimport { connect } from 'react-redux'; // import {setCurrentUser} from './redux/user/UserAction'\n\nimport { selectCurrentUser } from '../src/redux/user/UserSelector';\nimport { createStructuredSelector } from 'reselect'; // import Checkout from '../src/pages/checkout/Checkout'\n//  ** import {selectColletionsForPreview} from './redux/shop/ShopSelector'\n\nimport { checkUserSession } from './redux/user/UserAction';\nimport { GlobalStyles } from './GlobalStyles';\nimport Spinner from './components/spinner/Spinner-style';\nimport ErrorBoundary from './components/error-boundary/ErrorBoundary';\nconst Homepage = lazy(() => import('./pages/Homepage/Homepage'));\nconst Shop = lazy(() => import('./pages/shop/Shop'));\nconst SignUpSignIn = lazy(() => import('./pages/SignUp-SignIn/SignUpSignIn'));\nconst Checkout = lazy(() => import('../src/pages/checkout/Checkout'));\n\nconst App = ({\n  checkUserSession,\n  currentUser\n}) => {\n  // unsubscribeFromAuth=null;\n  useEffect(() => {\n    checkUserSession();\n  }, [checkUserSession]);\n  /* componentDidMount() {\n   //   const { checkUserSession } = this.props;\n   //   checkUserSession()\n   //   // const {setCurrentUser, **collectionsArray}=this.props;\n   //   // const {setCurrentUser}=this.props;\n    //   // this.unsubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\n   //   //   if(userAuth){\n   //   //     const userRef = await createUserProfileDocument(userAuth);\n  \n    //   //     //ref. in lecture 91\n   //   //     userRef.onSnapshot(snapShot=>{\n   //   //       setCurrentUser ({\n   //   //           id: snapShot.id,\n   //   //           ...snapShot.data()\n   //   //         })\n   //   //       })\n   //   //       // console.log(snapShot.data()) \n   //   //   }\n   //   //   setCurrentUser(userAuth) ;\n   //     // ** addCollectionAndDocuments('collections', collectionsArray.map(({title, items})=> ({title, items})) )\n   //   // });\n   // } \n   \n   componentWillUnmount(){\n     this.unsubscribeFromAuth();\n   }*/\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(GlobalStyles, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ErrorBoundary, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(Spinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 33\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    component: Homepage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/shop\",\n    component: Shop,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/checkout\",\n    component: Checkout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/signin\",\n    render: () => currentUser ? /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 16\n      }\n    }) : /*#__PURE__*/React.createElement(SignUpSignIn, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 16\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  })))));\n};\n\nconst mapStateToProps = createStructuredSelector({\n  currentUser: selectCurrentUser // ** collectionsArray : selectColletionsForPreview \n  // ** - We did all of this so we don't have to manually enter each collection and item into firebase\n\n}); // const mapStateToProps = ({ user , collections }) => ({\n//   currentUser: user.currentUser,\n//   collectionsArray : collections.collectionsArray\n// });\n\nconst mapDispatchToProps = dispatch => ({\n  checkUserSession: () => dispatch(checkUserSession())\n}); // const mapDispatchToProps= dispatch=>({\n//   setCurrentUser:user =>dispatch(setCurrentUser(user))\n// }) //** We removed this mapDispatchToProps as noe sagas is handling setting our current user on success */\n// export default connect(mapStateToProps,mapDispatchToProps)(App);\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["C:/Nodejs/ecomm/client/src/App.js"],"names":["React","useEffect","lazy","Suspense","Route","Switch","Redirect","Header","connect","selectCurrentUser","createStructuredSelector","checkUserSession","GlobalStyles","Spinner","ErrorBoundary","Homepage","Shop","SignUpSignIn","Checkout","App","currentUser","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React ,{useEffect, lazy, Suspense} from 'react';\nimport './App.scss';\n// import Homepage from './pages/Homepage/Homepage'\n// import Shop from './pages/shop/Shop'\nimport {Route,Switch,Redirect} from 'react-router-dom'\nimport Header from './components/Header/Header'\n// import SignUpSignIn from './pages/SignUp-SignIn/SignUpSignIn'\n//  import {auth , createUserProfileDocument , **addCollectionAndDocuments} from './firebase/Firebase'\n// import {auth , createUserProfileDocument} from './firebase/Firebase'\nimport {connect} from 'react-redux'\n// import {setCurrentUser} from './redux/user/UserAction'\nimport { selectCurrentUser } from '../src/redux/user/UserSelector'\nimport { createStructuredSelector } from 'reselect'\n// import Checkout from '../src/pages/checkout/Checkout'\n//  ** import {selectColletionsForPreview} from './redux/shop/ShopSelector'\nimport { checkUserSession } from './redux/user/UserAction'\nimport { GlobalStyles } from './GlobalStyles'\nimport Spinner from './components/spinner/Spinner-style'\nimport ErrorBoundary from './components/error-boundary/ErrorBoundary'\n\nconst Homepage = lazy(()=> import ('./pages/Homepage/Homepage'))\nconst Shop = lazy(()=> import('./pages/shop/Shop'))\nconst SignUpSignIn = lazy(()=> import('./pages/SignUp-SignIn/SignUpSignIn'))\nconst Checkout = lazy(()=> import('../src/pages/checkout/Checkout'))\n\n\nconst App =({ checkUserSession , currentUser })=>{\n  \n\n  // unsubscribeFromAuth=null;\n\n  useEffect(() => {\n    checkUserSession()\n  } , [checkUserSession])\n\n /* componentDidMount() {\n  //   const { checkUserSession } = this.props;\n  //   checkUserSession()\n  //   // const {setCurrentUser, **collectionsArray}=this.props;\n  //   // const {setCurrentUser}=this.props;\n\n  //   // this.unsubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\n  //   //   if(userAuth){\n  //   //     const userRef = await createUserProfileDocument(userAuth);\n\n\n\n  //   //     //ref. in lecture 91\n  //   //     userRef.onSnapshot(snapShot=>{\n  //   //       setCurrentUser ({\n  //   //           id: snapShot.id,\n  //   //           ...snapShot.data()\n  //   //         })\n  //   //       })\n  //   //       // console.log(snapShot.data()) \n  //   //   }\n  //   //   setCurrentUser(userAuth) ;\n  //     // ** addCollectionAndDocuments('collections', collectionsArray.map(({title, items})=> ({title, items})) )\n  //   // });\n  // } \n  \n  componentWillUnmount(){\n    this.unsubscribeFromAuth();\n  }*/\n\n  \n\n\n    return (\n      <div>\n        <GlobalStyles /> \n        <Header/>\n        <Switch>\n          <ErrorBoundary>\n            <Suspense fallback={<Spinner />}>\n          <Route exact path='/' component={Homepage} />\n          <Route path='/shop' component={Shop} />\n          <Route exact path='/checkout' component={Checkout} />\n          <Route exact path='/signin' render={()=>currentUser\n            ? (<Redirect to='/' />) \n            :( <SignUpSignIn/>)} />\n            </Suspense>\n          </ErrorBoundary>\n        </Switch>\n        \n      </div>\n    ); \n}\n\nconst mapStateToProps=createStructuredSelector ({\n  currentUser: selectCurrentUser \n  // ** collectionsArray : selectColletionsForPreview \n  // ** - We did all of this so we don't have to manually enter each collection and item into firebase\n})\n\n// const mapStateToProps = ({ user , collections }) => ({\n//   currentUser: user.currentUser,\n//   collectionsArray : collections.collectionsArray\n// });\n\nconst mapDispatchToProps =dispatch =>({\n  checkUserSession: () => dispatch(checkUserSession())\n})\n\n// const mapDispatchToProps= dispatch=>({\n//   setCurrentUser:user =>dispatch(setCurrentUser(user))\n// }) //** We removed this mapDispatchToProps as noe sagas is handling setting our current user on success */\n\n// export default connect(mapStateToProps,mapDispatchToProps)(App);\nexport default connect(mapStateToProps,mapDispatchToProps)(App);"]},"metadata":{},"sourceType":"module"}